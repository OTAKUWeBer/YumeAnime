<!-- Cloudflare Turnstile script -->
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

<!-- Login & Signup Modal -->
<div id="loginModalWidget" class="modal-backdrop hidden" role="dialog" aria-modal="true">
  <div class="modal-card">

    <!-- Header -->
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold text-white">Login</h3>
      <button id="closeLoginWidget" class="muted text-xl hover:text-white transition-colors" aria-label="Close login dialog">&times;</button>
    </div>

    <!-- AniList Login Button -->
    <div class="mb-6">
      <button id="anilistLoginBtn" class="btn btn-anilist w-full" type="button">
        <svg class="anilist-icon" viewBox="0 0 24 24">
          <path d="M6.361 2.943 0 21.056h4.06l1.077-3.133h6.875l1.077 3.133H17.15L10.789 2.943zm1.77 5.392 2.18 6.336H5.951zm10.365 9.794V8.113c3.02.501 4.473 2.273 4.473 4.728 0 2.456-1.453 4.227-4.473 4.728z"/>
        </svg>
        Continue with AniList
      </button>
      <div class="divider">or</div>
    </div>

    <!-- Login Form -->
    <form id="loginFormWidget" autocomplete="on" novalidate>
      <div class="mb-4">
        <label class="block muted text-sm mb-1" for="loginUsernameWidget">Username</label>
        <input id="loginUsernameWidget" name="username" class="input" placeholder="Enter your username" required autofocus />
      </div>

      <div class="mb-4">
        <label class="block muted text-sm mb-1" for="loginPasswordWidget">Password</label>
        <input id="loginPasswordWidget" name="password" type="password" class="input" placeholder="Enter your password" required minlength="6" />
      </div>

      <!-- Remember + Sign up button -->
      <div class="flex items-center justify-between mb-6">
        <label class="flex items-center muted text-sm">
          <input id="rememberWidget" type="checkbox" class="mr-2 rounded" /> Remember me
        </label>
        <button type="button" id="showSignupWidget" class="small-link">Sign up instead</button>
      </div>

      <!-- Turnstile widget -->
      <div class="cf-turnstile" data-sitekey="0x4AAAAAABu3fPLT_Y5VwGsZ" data-theme="dark"></div>

      <div class="flex space-x-3 mt-4">
        <button type="button" id="cancelLoginWidget" class="flex-1 btn btn-secondary">Cancel</button>
        <button type="submit" id="submitLoginWidget" class="flex-1 btn btn-primary">
          <span id="loginBtnTextWidget">Login</span>
          <div id="loginSpinnerWidget" class="spinner hidden mx-auto"></div>
        </button>
      </div>

      <p id="loginMsgWidget" class="muted mt-3 text-center text-sm" role="status" aria-live="polite"></p>
    </form>

    <!-- Signup Form -->
    <form id="signupFormWidget" class="hidden" autocomplete="on" novalidate>
      <div class="mb-4">
        <label class="block muted text-sm mb-1" for="signupUsernameWidget">Username</label>
        <input id="signupUsernameWidget" name="username" type="text" class="input" placeholder="Choose a username" required />
      </div>

      <div class="mb-4">
        <label class="block muted text-sm mb-1" for="signupEmailWidget">Email</label>
        <input id="signupEmailWidget" name="email" type="email" class="input" placeholder="Enter your email" required />
      </div>

      <div class="mb-4">
        <label class="block muted text-sm mb-1" for="signupPasswordWidget">Password</label>
        <input id="signupPasswordWidget" name="password" type="password" class="input" placeholder="Create a password" required minlength="6" />
      </div>

      <div class="mb-4">
        <label class="block muted text-sm mb-1" for="confirmPasswordWidget">Confirm Password</label>
        <input id="confirmPasswordWidget" name="confirmPassword" type="password" class="input" placeholder="Confirm your password" required />
      </div>

      <!-- Turnstile widget -->
      <div class="cf-turnstile" data-sitekey="0x4AAAAAABu3fPLT_Y5VwGsZ" data-theme="dark"></div>

      <!-- Back to login -->
      <div class="flex items-center justify-between mb-6">
        <div></div>
        <button type="button" id="showLoginWidget" class="small-link">Back to login</button>
      </div>

      <div class="flex space-x-3 mt-4">
        <button type="button" id="cancelSignupWidget" class="flex-1 btn btn-secondary">Cancel</button>
        <button type="submit" id="submitSignupWidget" class="flex-1 btn btn-primary">
          <span id="signupBtnTextWidget">Sign Up</span>
          <div id="signupSpinnerWidget" class="spinner hidden mx-auto"></div>
        </button>
      </div>

      <p id="signupMsgWidget" class="muted mt-3 text-center text-sm" role="status" aria-live="polite"></p>
    </form>

  </div>
</div>
